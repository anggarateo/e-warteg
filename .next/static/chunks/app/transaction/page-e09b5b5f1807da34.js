(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{51:function(e,s,t){Promise.resolve().then(t.bind(t,966))},1706:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var n=t(7437),a=t(9411),r=t(544),i=t(594),l=t(1895),c=t(1718),d=t(9571),u=t(5925);function o(e){let{isOpen:s,onClose:t,payment:o}=e;async function x(e){let s=[];if(await (0,a.U2)("trx").then(e=>s=JSON.parse((null==e?void 0:e.value)||"[]")).catch(e=>{console.log("e get update trx:",e),u.default.error(e)}),s.length){let t=s.map(s=>(s.id===e.id&&(s.status=e.status),s));t?await (0,a.Ue)("trx",JSON.stringify(t)).catch(e=>{console.log("e create trx api:",e),u.default.error(e)}):u.default.error("Id transaksi tidak sesuai")}else u.default.error("Transaksi tidak ditemukan")}async function h(){(null==o?void 0:o.id)&&await (0,r.d)(o.id).then(async e=>await x(e)).catch(e=>{console.log("e onclose",e),u.default.error(e)}),t()}return(0,n.jsx)(i.R,{isOpen:s,isDismissable:!1,isKeyboardDismissDisabled:!0,scrollBehavior:"inside",size:"5xl",placement:"center",classNames:{wrapper:"sm:mt-8"},onClose:h,children:(0,n.jsx)(l.A,{children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.k,{children:"Pembayaran"}),(0,n.jsx)(d.I,{children:(0,n.jsx)("iframe",{src:null==o?void 0:o.invoice_url,className:"h-[calc(100vh*(9/10))]"})})]})})})}},966:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var n=t(7437);function a(e){let{children:s,color:t,size:a}=e;return(0,n.jsx)("div",{className:"".concat(function(){switch(t){case"primary":return"bg-blue-100 text-blue-500";case"secondary":return"bg-gray-100 text-gray-500";case"success":return"bg-green-100 text-green-500";case"warning":return"bg-yellow-100 text-yellow-500";case"error":return"bg-red-100 text-red-500";case"black":return"bg-black text-white";case"white":return"bg-white text-black border border-2"}}()," ").concat("sm"===a?"text-sm":""," p-1 px-2 rounded-full w-fit"),children:s})}function r(e){return new Intl.NumberFormat("in-ID").format(e)}var i=t(2759),l=t(504),c=t(5310),d=t(795),u=t(2067),o=t.n(u),x=t(6691),h=t.n(x),m=t(2265),f=t(1706),j=t(9411),b=t(5925);function p(){let[e,s]=(0,m.useState)([]),[t,u]=(0,m.useState)(!1),[x,p]=(0,m.useState)(!1),[v,w]=(0,m.useState)(),N=[];for(let e=0;e<4;e++)N.push((0,n.jsx)(l.G,{icon:i.Tab,className:"text-yellow-500"},e));N.push((0,n.jsx)(l.G,{icon:i.pG1,className:"text-yellow-500"},5));let g=[];for(let e=0;e<10;e++)g.push((0,n.jsxs)("div",{className:"rounded-xl shadow-md border w-full md:w-[31%] lg:w-[32%] divide-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm p-2",children:[(0,n.jsxs)("h1",{children:["No/Inv/1",e]}),(0,n.jsx)("h1",{children:o()().format("HH:mm DD/MM/YYYY")})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(h(),{src:"https://placehold.co/100x100?text=Nasi Pecel",alt:"Nasi Pecel",width:100,height:100}),(0,n.jsxs)("div",{className:"p-2 space-y-1",children:[(0,n.jsxs)("h1",{className:"font-semibold",children:["Nasi Pecel x ",e+1]}),(0,n.jsx)("h1",{className:"text-xs",children:"Catatan: -"})]})]}),(0,n.jsxs)("div",{className:"flex justify-between p-2 items-center",children:[1===e?(0,n.jsx)("div",{children:N}):(0,n.jsx)(c.A,{color:"warning",className:"text-white",children:"Beri Nilai"}),(0,n.jsx)(c.A,{children:"Beli Lagi"})]})]},e));async function y(){u(!0),await (0,j.U2)("trx").then(e=>{s(JSON.parse((null==e?void 0:e.value)||"[]"))}).catch(e=>{console.log("e get trx mytrx:",e),b.default.error(e)}),u(!1)}return(0,m.useEffect)(()=>{y()},[]),(0,n.jsxs)(n.Fragment,{children:[x&&(0,n.jsx)(f.Z,{isOpen:x,payment:v,onClose:()=>{y(),p(!1)}}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4 p-2 sm:p-4 justify-center sm:justify-start",children:[t&&(0,n.jsx)(d.X,{className:"rounded-xl shadow-md w-full md:w-[31%] lg:w-[32%] h-60"}),!t&&!e.length&&(0,n.jsx)("h1",{className:"p-4 text-center",children:"Kamu belum transaksi apapun, segera lakukan transaksi!"}),!t&&e.map((e,s)=>{var t,i,l;return(0,n.jsxs)("div",{className:"rounded-xl shadow-md border w-full md:w-[31%] lg:w-[32%] divide-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-end text-sm p-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(a,{color:"PAID"===e.status||"SETTLED"===e.status?"success":"warning",children:function(e){switch(e){case"PENDING":return"Menunggu Pembayaran";case"PAID":case"SETTLED":return"Lunas";default:return e}}(e.status)}),(0,n.jsx)("h1",{children:e.external_id})]}),(0,n.jsxs)("div",{className:"text-end",children:[1===s?(0,n.jsx)("div",{children:N}):(0,n.jsx)(c.A,{color:"warning",size:"sm",className:"text-white",children:"Beri Nilai"}),(0,n.jsx)("h1",{children:o()(e.created).format("HH:mm DD/MM/YYYY")})]})]}),(0,n.jsxs)("div",{className:"pb-2",children:[(0,n.jsxs)("div",{className:"p-2 flex justify-between font-semibold",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:e.customer.given_names}),(0,n.jsx)("h1",{children:e.customer.mobile_number})]}),(0,n.jsx)("h1",{children:e.customer.surname||"Dibungkus"})]}),null===(t=e.items)||void 0===t?void 0:t.filter((e,s)=>s<2).map((e,s)=>(0,n.jsxs)("div",{className:"px-4 flex justify-between text-sm",children:[(0,n.jsxs)("h1",{children:[e.name," x ",e.quantity]}),(0,n.jsxs)("h1",{children:["Rp. ",r(e.price)]})]},s)),(null===(i=e.items)||void 0===i?void 0:i.length)>2&&(0,n.jsxs)("div",{className:"px-4 text-center text-sm",children:[(null===(l=e.items)||void 0===l?void 0:l.length)-2," menu lainnya"]})]}),(0,n.jsxs)("div",{className:"flex justify-between p-2",children:[("PAID"===e.status||"SETTLED"===e.status)&&(0,n.jsx)(c.A,{children:"Beli Lagi"}),"PENDING"===e.status&&(0,n.jsx)(c.A,{onClick:()=>{w(e),p(!0)},children:"Bayar"}),(0,n.jsxs)("h1",{children:["Rp. ",r(e.amount)]})]})]},s)})]})]})}},9411:function(e,s,t){"use strict";t.d(s,{Od:function(){return a},U2:function(){return i},Ue:function(){return r}}),t(5355);var n=t(1162),a=(0,n.$)("8d3be4cbdf9359c37a6faa66016ae23ce3c89877"),r=(0,n.$)("99c7277d511d8c5a4628e9beb52adb8b4fe1db44"),i=(0,n.$)("a1a67a894942ea186c21e91d038c0f409ccaffc7")},544:function(e,s,t){"use strict";t.d(s,{Z:function(){return a},d:function(){return r}}),t(5355);var n=t(1162),a=(0,n.$)("cb443d0626162d2d5132bb5b4127b8cf66570048"),r=(0,n.$)("992d62b349c079a0e1c4ebe66a1a776c1ea6d078")}},function(e){e.O(0,[676,990,854,714,868,478,745,971,938,744],function(){return e(e.s=51)}),_N_E=e.O()}]);